<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Online Safety Course (EN/AR) â€” 3 Sections</title>

  <!-- âœ… Replace "school-logo.png" with your real logo file path/name -->
  <link rel="icon" type="image/png" href="school-logo.png" />

  <style>
    :root{
      --bg:#f6f8ff;
      --bg2:#eef3ff;
      --card:#ffffff;
      --line:#dfe6ff;
      --text:#152046;
      --muted:#53608f;
      --accent:#5a67ff;
      --accent2:#12b3a8;
      --ok:#16a34a;
      --warn:#f59e0b;
      --bad:#ef4444;
      --shadow: 0 10px 30px rgba(21,32,70,.08);
      --r:16px;
      --sans: system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:var(--sans);
      color:var(--text);
      min-height:100vh;
      background:
        radial-gradient(900px 500px at 15% 5%, rgba(90,103,255,.20), transparent 60%),
        radial-gradient(900px 500px at 85% 20%, rgba(18,179,168,.14), transparent 60%),
        linear-gradient(180deg, var(--bg), var(--bg2));
    }
    header{
      position:sticky; top:0; z-index:10;
      background: rgba(246,248,255,.75);
      backdrop-filter: blur(10px);
      border-bottom:1px solid var(--line);
    }
    .wrap{max-width:1000px; margin:0 auto; padding:16px;}
    .top{
      display:flex; align-items:center; justify-content:space-between;
      gap:12px; flex-wrap:wrap;
    }
    .brand{display:flex; align-items:center; gap:12px;}
    .logoImgWrap{
      width:44px; height:44px; border-radius:14px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.95);
      box-shadow: var(--shadow);
      display:grid; place-items:center;
      overflow:hidden;
      flex: 0 0 auto;
    }
    .logoImgWrap img{
      width:100%; height:100%;
      object-fit:contain;
      padding:6px;
    }
    h1{margin:0; font-size:16px; line-height:1.2}
    .sub{margin:0; font-size:12px; color:var(--muted)}
    .right{display:flex; gap:10px; align-items:center; flex-wrap:wrap}
    .pill{
      font-size:12px;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.85);
      color:var(--muted);
      white-space:nowrap;
    }
    .langBtn{
      border:1px solid rgba(90,103,255,.35);
      background: rgba(90,103,255,.10);
      padding:9px 12px;
      border-radius:999px;
      cursor:pointer;
      font-weight:800;
      color:var(--text);
    }

    main{padding:18px 0 34px}
    .grid{display:grid; grid-template-columns: 330px 1fr; gap:14px;}
    @media (max-width: 920px){ .grid{grid-template-columns:1fr;} }

    .card{
      background: var(--card);
      border:1px solid var(--line);
      border-radius: var(--r);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .hd{
      padding:14px 14px 10px;
      border-bottom:1px solid var(--line);
      display:flex; align-items:center; justify-content:space-between; gap:10px;
    }
    .bd{padding:14px}
    .title{font-size:14px; margin:0}
    .muted{color:var(--muted); font-size:12px}
    .progress{
      height:10px; border-radius:999px;
      background: rgba(90,103,255,.08);
      border:1px solid var(--line);
      overflow:hidden;
      margin-top:10px;
    }
    .bar{
      height:100%;
      width:0%;
      background: linear-gradient(90deg, rgba(90,103,255,.95), rgba(18,179,168,.95));
      transition: width .25s ease;
    }

    /* âœ… FIXED: section cards are GRID so titles align perfectly */
    .sectionCard{
      border:1px solid var(--line);
      border-radius: 14px;
      padding:12px;
      background: linear-gradient(180deg, rgba(90,103,255,.06), rgba(18,179,168,.04));
      margin-top:10px;

      display:grid;
      grid-template-columns: 40px 1fr auto; /* badge | text | button */
      align-items:center;
      gap:12px;
    }
    .sectionCard.locked{opacity:.55; filter:saturate(.7);}

    .badgeNum{
      width:34px; height:34px; border-radius:12px;
      display:grid; place-items:center;
      background: rgba(255,255,255,.9);
      border:1px solid var(--line);
      color: var(--text);
      font-size:18px;
      font-weight:900;
    }
    .sectionText{min-width:0;}
    .sectionText strong{
      display:block;
      font-size:14px;
      line-height:1.2;
    }
    .sectionText .muted{margin-top:4px;}

    .btn{
      border:1px solid var(--line);
      background: rgba(255,255,255,.95);
      color:var(--text);
      padding:10px 12px;
      border-radius: 14px;
      cursor:pointer;
      font-weight:800;
      transition:.15s transform,.15s border,.15s background;
    }
    .btn:hover{transform: translateY(-1px); border-color: rgba(18,179,168,.35);}
    .btn.primary{
      border-color: rgba(90,103,255,.35);
      background: rgba(90,103,255,.10);
      min-width:92px; /* âœ… keep Locked/Open same width */
      text-align:center;
    }
    .btn:disabled{cursor:not-allowed; opacity:.55; transform:none;}

    /* Right panel content */
    .big{
      font-size:18px;
      font-weight:950;
      margin:0 0 4px;
      letter-spacing:.2px;
    }
    .note{
      padding:12px;
      border-radius: 14px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.85);
    }
    ul{margin:8px 0 0 18px}
    li{margin:6px 0}
    .row{display:flex; gap:10px; flex-wrap:wrap; align-items:center}
    .divider{height:1px; background: var(--line); margin:12px 0}

    .q{
      border:1px solid var(--line);
      border-radius: 14px;
      padding:12px;
      background: rgba(255,255,255,.92);
    }
    .q h3{margin:0 0 8px; font-size:14px}
    .choices{display:grid; gap:8px;}
    .choice{
      text-align:left;
      padding:10px;
      border-radius: 14px;
      border:1px solid var(--line);
      background: rgba(90,103,255,.05);
      cursor:pointer;
      transition:.15s transform,.15s border,.15s background;
      font-weight:700;
      color:var(--text);
    }
    .choice:hover{transform: translateY(-1px); border-color: rgba(90,103,255,.35);}
    .choice[aria-pressed="true"]{
      border-color: rgba(18,179,168,.55);
      background: rgba(18,179,168,.10);
      box-shadow: 0 0 0 3px rgba(18,179,168,.12);
    }
    .choice:disabled{opacity:.8; cursor:not-allowed; transform:none;}
    .choice.correct{border-color: rgba(22,163,74,.45); background: rgba(22,163,74,.10);}
    .choice.wrong{border-color: rgba(239,68,68,.45); background: rgba(239,68,68,.10);}

    .callout{
      border-radius: 14px;
      padding:12px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.92);
    }
    .callout.ok{border-color: rgba(22,163,74,.35); background: rgba(22,163,74,.08);}
    .callout.warn{border-color: rgba(245,158,11,.35); background: rgba(245,158,11,.08);}

    footer{color:var(--muted); font-size:12px; padding:14px 0 0}

    /* RTL support */
    html[dir="rtl"] ul{margin:8px 18px 0 0}
    html[dir="rtl"] .choice{text-align:right}

    /* HERO BADGE MODAL + CONFETTI */
    .overlay{
      position:fixed;
      inset:0;
      background: rgba(10,15,28,.35);
      backdrop-filter: blur(6px);
      display:none;
      align-items:center;
      justify-content:center;
      z-index:999;
      padding:16px;
    }
    .overlay.show{display:flex;}
    .modal{
      width:min(520px, 96vw);
      background: rgba(255,255,255,.98);
      border:1px solid var(--line);
      border-radius: 22px;
      box-shadow: 0 20px 70px rgba(21,32,70,.18);
      overflow:hidden;
      position:relative;
    }
    .modalTop{
      padding:16px 16px 10px;
      border-bottom:1px solid var(--line);
      display:flex; align-items:center; justify-content:space-between; gap:10px;
    }
    .modalTop strong{font-size:14px}
    .closeX{
      border:1px solid var(--line);
      background:white;
      width:38px; height:38px;
      border-radius: 14px;
      cursor:pointer;
      font-weight:900;
    }
    .modalBody{padding:18px 16px 16px; text-align:center;}
    .heroMedal{
      width:90px; height:90px;
      border-radius: 26px;
      margin: 6px auto 12px;
      display:grid; place-items:center;
      background: linear-gradient(135deg, rgba(90,103,255,.18), rgba(18,179,168,.14));
      border: 1px solid rgba(90,103,255,.22);
      position:relative;
    }
    .heroMedal span{font-size:44px}
    .heroTitle{
      margin:0;
      font-size:20px;
      font-weight:950;
      letter-spacing:.2px;
    }
    .heroSub{margin:8px 0 14px; color:var(--muted); font-size:13px; line-height:1.45;}
    .modalActions{
      display:flex; gap:10px; justify-content:center; flex-wrap:wrap;
      padding: 0 16px 16px;
    }

    canvas#confetti{
      position:fixed;
      inset:0;
      pointer-events:none;
      z-index:1000;
      display:none;
    }
    canvas#confetti.show{display:block;}
  </style>
</head>

<body>
<header>
  <div class="wrap">
    <div class="top">
      <div class="brand">
        <!-- âœ… Replace "school-logo.png" with your real logo file path/name -->
        <div class="logoImgWrap" title="School Logo">
          <img src="Altaleaalogo.png" alt="School Logo"
               onerror="this.style.display='none'; this.parentElement.textContent='ðŸ«'; this.parentElement.style.fontWeight='900';" />
        </div>
        <div>
          <h1 id="brandTitle">Online Safety Course</h1>
          <p class="sub" id="brandSub">3 sections â€” unlock as you pass</p>
        </div>
      </div>

      <div class="right">
        <span class="pill"><span id="scoreLabel">Points</span>: <strong id="points">0</strong></span>
        <span class="pill"><span id="statusLabel">Unlocked</span>: <strong id="unlockCount">1</strong>/3</span>
        <button class="langBtn" id="langToggle">AR</button>
      </div>
    </div>
  </div>
</header>

<main class="wrap">
  <div class="grid">
    <!-- LEFT: Sections -->
    <aside class="card">
      <div class="hd">
        <h2 class="title" id="sectionsTitle">Sections</h2>
        <button class="btn" id="resetBtn">Reset</button>
      </div>
      <div class="bd">
        <div class="muted" id="leftHelp">Complete Section 1 to unlock Section 2, then Section 3.</div>

        <div class="progress" aria-label="Course progress">
          <div class="bar" id="progressBar"></div>
        </div>

        <div class="sectionCard" id="secCard1">
          <div class="badgeNum">1</div>
          <div class="sectionText">
            <strong id="sec1Name">Passwords & Codes</strong>
            <div class="muted" id="sec1Hint">Simple steps + 3 MCQ</div>
          </div>
          <button class="btn primary" id="open1">Open</button>
        </div>

        <div class="sectionCard locked" id="secCard2">
          <div class="badgeNum">2</div>
          <div class="sectionText">
            <strong id="sec2Name">Links & Downloads</strong>
            <div class="muted" id="sec2Hint">Unlock after Section 1</div>
          </div>
          <button class="btn primary" id="open2" disabled>Locked</button>
        </div>

        <div class="sectionCard locked" id="secCard3">
          <div class="badgeNum">3</div>
          <div class="sectionText">
            <strong id="sec3Name">Privacy & Posting</strong>
            <div class="muted" id="sec3Hint">Unlock after Section 2</div>
          </div>
          <button class="btn primary" id="open3" disabled>Locked</button>
        </div>

        <div class="divider"></div>

        <div class="row">
          <button class="btn" id="saveBtn">Save</button>
          <button class="btn" id="loadBtn">Load</button>
        </div>
        <div class="muted" id="saveNote" style="margin-top:10px;">Saves in this browser only.</div>
      </div>
    </aside>

    <!-- RIGHT: Active section -->
    <section class="card">
      <div class="hd">
        <div>
          <div class="big" id="panelTitle">Section 1</div>
          <div class="muted" id="panelSub">Read the steps, then answer 3 questions.</div>
        </div>
        <span class="pill"><span id="sectionPointsLabel">Section points</span>: <strong id="sectionPoints">0</strong>/30</span>
      </div>

      <div class="bd">
        <section id="content"></section>

        <div class="divider"></div>

        <div class="row" style="justify-content:space-between;">
          <div class="muted" id="passRule">Pass rule: 2/3 correct (20 points) unlocks next section.</div>
          <button class="btn primary" id="submitBtn">Submit answers</button>
        </div>

        <div style="height:12px"></div>
        <div class="callout" id="resultBox" hidden></div>

        <footer id="footerText">Tip: If something feels urgent or secret, pause and ask.</footer>
      </div>
    </section>
  </div>
</main>

<canvas id="confetti"></canvas>

<div class="overlay" id="heroOverlay" role="dialog" aria-modal="true" aria-label="Completion Badge">
  <div class="modal">
    <div class="modalTop">
      <strong id="heroHeader">Achievement</strong>
      <button class="closeX" id="heroClose" aria-label="Close">âœ•</button>
    </div>
    <div class="modalBody">
      <div class="heroMedal"><span>ðŸ¦¸</span></div>
      <h2 class="heroTitle" id="heroTitle">Online Safe Hero</h2>
      <p class="heroSub" id="heroSub">You completed all 3 sections. Keep using these safety habits!</p>
    </div>
    <div class="modalActions">
      <button class="btn primary" id="heroReplay">Replay Confetti</button>
      <button class="btn" id="heroOk">OK</button>
    </div>
  </div>
</div>

<script>
  const $ = (q, el=document)=>el.querySelector(q);
  const $$ = (q, el=document)=>Array.from(el.querySelectorAll(q));
  const KEY = "online_safety_3sections_light_bilingual_v2";

  const I18N = {
    en: {
      dir:"ltr",
      brandTitle:"Online Safety Course",
      brandSub:"3 sections â€” unlock as you pass",
      scoreLabel:"Points",
      statusLabel:"Unlocked",
      sectionsTitle:"Sections",
      leftHelp:"Complete Section 1 to unlock Section 2, then Section 3.",
      reset:"Reset",
      save:"Save",
      load:"Load",
      saveNote:"Saves in this browser only.",
      open:"Open",
      locked:"Locked",
      secHints:{ s1:"Simple steps + 3 MCQ", s2:"Unlock after Section 1", s3:"Unlock after Section 2" },
      panelSub:"Read the steps, then answer 3 questions.",
      sectionPointsLabel:"Section points",
      passRule:"Pass rule: 2/3 correct (20 points) unlocks next section.",
      submit:"Submit answers",
      footer:"Tip: If something feels urgent or secret, pause and ask.",
      resultPass:"Passed âœ… Next section unlocked.",
      resultFail:"Not passed âŒ Review the steps and try again.",
      flashes:{saved:"Saved!", loaded:"Loaded!", nosave:"No save found."},
      heroHeader:"Achievement",
      heroTitle:"Online Safe Hero",
      heroSub:"You completed all 3 sections. Keep using these safety habits!",
      heroReplay:"Replay Confetti",
      heroOk:"OK"
    },
    ar: {
      dir:"rtl",
      brandTitle:"Ø¯ÙˆØ±Ø© Ø§Ù„Ø³Ù„Ø§Ù…Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª",
      brandSub:"Ù£ Ø£Ù‚Ø³Ø§Ù… â€” ØªÙØªØ­ Ø¨Ø§Ù„ØªØ¯Ø±ÙŠØ¬ Ø¹Ù†Ø¯ Ø§Ù„Ù†Ø¬Ø§Ø­",
      scoreLabel:"Ø§Ù„Ù†Ù‚Ø§Ø·",
      statusLabel:"Ø§Ù„Ù…ÙØªÙˆØ­",
      sectionsTitle:"Ø§Ù„Ø£Ù‚Ø³Ø§Ù…",
      leftHelp:"Ø£ÙƒÙ…Ù„ Ø§Ù„Ù‚Ø³Ù… Ù¡ Ù„ÙØªØ­ Ø§Ù„Ù‚Ø³Ù… Ù¢ØŒ Ø«Ù… Ø§Ù„Ù‚Ø³Ù… Ù£.",
      reset:"Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø·",
      save:"Ø­ÙØ¸",
      load:"ØªØ­Ù…ÙŠÙ„",
      saveNote:"ÙŠØªÙ… Ø§Ù„Ø­ÙØ¸ Ø¯Ø§Ø®Ù„ Ù‡Ø°Ø§ Ø§Ù„Ù…ØªØµÙØ­ ÙÙ‚Ø·.",
      open:"ÙØªØ­",
      locked:"Ù…ØºÙ„Ù‚",
      secHints:{ s1:"Ø®Ø·ÙˆØ§Øª Ø¨Ø³ÙŠØ·Ø© + Ù£ Ø£Ø³Ø¦Ù„Ø©", s2:"ÙŠÙØªØ­ Ø¨Ø¹Ø¯ Ø§Ù„Ù‚Ø³Ù… Ù¡", s3:"ÙŠÙØªØ­ Ø¨Ø¹Ø¯ Ø§Ù„Ù‚Ø³Ù… Ù¢" },
      panelSub:"Ø§Ù‚Ø±Ø£ Ø§Ù„Ø®Ø·ÙˆØ§Øª Ø«Ù… Ø£Ø¬Ø¨ Ø¹Ù† Ù£ Ø£Ø³Ø¦Ù„Ø©.",
      sectionPointsLabel:"Ù†Ù‚Ø§Ø· Ø§Ù„Ù‚Ø³Ù…",
      passRule:"Ø´Ø±Ø· Ø§Ù„Ù†Ø¬Ø§Ø­: Ù¢/Ù£ ØµØ­ÙŠØ­ (Ù¢Ù  Ù†Ù‚Ø·Ø©) Ù„ÙØªØ­ Ø§Ù„Ù‚Ø³Ù… Ø§Ù„ØªØ§Ù„ÙŠ.",
      submit:"Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª",
      footer:"Ù†ØµÙŠØ­Ø©: Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø£Ù…Ø± Ù…Ø³ØªØ¹Ø¬Ù„Ø§Ù‹ Ø£Ùˆ Ø³Ø±ÙŠØ§Ù‹â€¦ ØªÙˆÙ‚Ù ÙˆØ§Ø³Ø£Ù„.",
      resultPass:"Ù†Ø¬Ø­Øª âœ… ØªÙ… ÙØªØ­ Ø§Ù„Ù‚Ø³Ù… Ø§Ù„ØªØ§Ù„ÙŠ.",
      resultFail:"Ù„Ù… ØªÙ†Ø¬Ø­ âŒ Ø±Ø§Ø¬Ø¹ Ø§Ù„Ø®Ø·ÙˆØ§Øª ÙˆØ­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.",
      flashes:{saved:"ØªÙ… Ø§Ù„Ø­ÙØ¸!", loaded:"ØªÙ… Ø§Ù„ØªØ­Ù…ÙŠÙ„!", nosave:"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø­ÙØ¸."},
      heroHeader:"Ø¥Ù†Ø¬Ø§Ø²",
      heroTitle:"Ø¨Ø·Ù„ Ø§Ù„Ø£Ù…Ø§Ù† Ø§Ù„Ø±Ù‚Ù…ÙŠ",
      heroSub:"Ø£ÙƒÙ…Ù„Øª Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ø§Ù„Ø«Ù„Ø§Ø«Ø©. Ø§Ø³ØªÙ…Ø± Ø¹Ù„Ù‰ Ø¹Ø§Ø¯Ø§Øª Ø§Ù„Ø£Ù…Ø§Ù†!",
      heroReplay:"Ø£Ø¹Ø¯ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ù†Ø§Ø±ÙŠØ©",
      heroOk:"Ø­Ø³Ù†Ù‹Ø§"
    }
  };

  const COURSE = {
    en: [
      {
        id:1,
        name:"Passwords & Codes",
        steps:[
          "Use a long passphrase (12+ characters).",
          "Never share one-time codes (OTP) or verification codes.",
          "Turn on 2-step verification when available."
        ],
        questions:[
          { q:"Which password is strongest?", a:["cat123","Blue!River-Cloud99","password"], ok:1, why:"Long + mixed characters is harder to guess." },
          { q:"A friend asks for your OTP code. What should you do?", a:["Send it quickly","Never share it","Post it in the group chat"], ok:1, why:"OTP codes can be used to steal accounts." },
          { q:"Best place to store passwords is:", a:["A password manager or written safely at home","In public notes app","Same password everywhere"], ok:0, why:"Use safe storage and never reuse passwords." }
        ]
      },
      {
        id:2,
        name:"Links & Downloads",
        steps:[
          "Donâ€™t click strange links in messagesâ€”go to the official app/site yourself.",
          "Download apps only from trusted stores.",
          "If something says â€œurgentâ€ or â€œsecretâ€, slow down."
        ],
        questions:[
          { q:"Which link looks most suspicious?", a:["school.edu/portal","my-game-free-rewards.xyz","library.gov/books"], ok:1, why:"Random domains + rewards are common scam signs." },
          { q:"You get a pop-up saying â€œUpdate now!â€ Whatâ€™s safest?", a:["Close it and update from the official store/settings","Click the pop-up","Ask the pop-up for help"], ok:0, why:"Updates should come from official sources." },
          { q:"A message says: â€œDonâ€™t tell anyone. Click now.â€ This is a:", a:["Red flag","Normal reminder","Teacher instruction"], ok:0, why:"Secrecy + urgency is a scam tactic." }
        ]
      },
      {
        id:3,
        name:"Privacy & Posting",
        steps:[
          "Keep your profile private and accept only people you know in real life.",
          "Before posting photos, check for school name, address, or schedule.",
          "If someone bothers you: block, report, screenshot, tell an adult."
        ],
        questions:[
          { q:"What is OK to post publicly?", a:["Your address","A photo showing your timetable","A drawing with no personal details"], ok:2, why:"Share content that doesnâ€™t reveal identity or location." },
          { q:"Best setting for friend requests is:", a:["Everyone","Only people I know","Strangers only"], ok:1, why:"Limit contact to real-life connections." },
          { q:"Someone is bullying you online. Best action?", a:["Argue back","Block/report and tell a trusted adult","Share their private info"], ok:1, why:"Donâ€™t escalateâ€”get help and use safety tools." }
        ]
      }
    ],
    ar: [
      {
        id:1,
        name:"ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙˆØ± ÙˆØ§Ù„Ø±Ù…ÙˆØ² Ø§Ù„Ù…Ø¤Ù‚ØªØ©",
        steps:[
          "Ø§Ø³ØªØ®Ø¯Ù… Ø¹Ø¨Ø§Ø±Ø© Ù…Ø±ÙˆØ± Ø·ÙˆÙŠÙ„Ø© (Ù¡Ù¢ Ø­Ø±ÙØ§Ù‹ Ø£Ùˆ Ø£ÙƒØ«Ø±).",
          "Ù„Ø§ ØªØ´Ø§Ø±Ùƒ Ø£Ø¨Ø¯Ø§Ù‹ ÙƒÙˆØ¯ Ø§Ù„ØªØ­Ù‚Ù‚ (OTP) Ø£Ùˆ Ø£ÙŠ ÙƒÙˆØ¯ Ø¯Ø®ÙˆÙ„.",
          "ÙØ¹Ù‘Ù„ Ø§Ù„ØªØ­Ù‚Ù‚ Ø¨Ø®Ø·ÙˆØªÙŠÙ† Ø¹Ù†Ø¯Ù…Ø§ ÙŠÙƒÙˆÙ† Ù…ØªØ§Ø­Ø§Ù‹."
        ],
        questions:[
          { q:"Ø£ÙŠ ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ù‡ÙŠ Ø§Ù„Ø£Ù‚ÙˆÙ‰ØŸ", a:["cat123","Blue!River-Cloud99","password"], ok:1, why:"Ø·ÙˆÙ„ Ø£ÙƒØ¨Ø± + ØªÙ†ÙˆØ¹ ÙŠØ¬Ø¹Ù„ Ø§Ù„ØªØ®Ù…ÙŠÙ† Ø£ØµØ¹Ø¨." },
          { q:"ØµØ¯ÙŠÙ‚ ÙŠØ·Ù„Ø¨ Ù…Ù†Ùƒ ÙƒÙˆØ¯ OTP. Ù…Ø§Ø°Ø§ ØªÙØ¹Ù„ØŸ", a:["Ø£Ø±Ø³Ù„Ù‡ Ø¨Ø³Ø±Ø¹Ø©","Ù„Ø§ ØªØ´Ø§Ø±ÙƒÙ‡ Ø£Ø¨Ø¯Ø§Ù‹","Ø§ÙƒØªØ¨Ù‡ ÙÙŠ Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„ØµÙ"], ok:1, why:"Ø£ÙƒÙˆØ§Ø¯ OTP Ù‚Ø¯ ØªÙØ³ØªØ®Ø¯Ù… Ù„Ø³Ø±Ù‚Ø© Ø§Ù„Ø­Ø³Ø§Ø¨." },
          { q:"Ø£ÙØ¶Ù„ Ù…ÙƒØ§Ù† Ù„Ø­ÙØ¸ ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙˆØ± Ù‡Ùˆ:", a:["Ù…Ø¯ÙŠØ± ÙƒÙ„Ù…Ø§Øª Ù…Ø±ÙˆØ± Ø£Ùˆ ÙƒØªØ§Ø¨Ø© Ø¢Ù…Ù†Ø© ÙÙŠ Ø§Ù„Ù…Ù†Ø²Ù„","Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¹Ø§Ù…Ø©","Ù†ÙØ³ Ø§Ù„ÙƒÙ„Ù…Ø© Ù„ÙƒÙ„ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª"], ok:0, why:"Ø§Ø­ÙØ¸Ù‡Ø§ Ø¨Ø´ÙƒÙ„ Ø¢Ù…Ù† ÙˆÙ„Ø§ ØªØ¹ÙØ¯ Ø§Ø³ØªØ®Ø¯Ø§Ù…Ù‡Ø§." }
        ]
      },
      {
        id:2,
        name:"Ø§Ù„Ø±ÙˆØ§Ø¨Ø· ÙˆØ§Ù„ØªÙ†Ø²ÙŠÙ„Ø§Øª",
        steps:[
          "Ù„Ø§ ØªØ¶ØºØ· Ø±ÙˆØ§Ø¨Ø· ØºØ±ÙŠØ¨Ø© ÙÙŠ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„â€”Ø§Ø°Ù‡Ø¨ Ù„Ù„Ù…ÙˆÙ‚Ø¹/Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø±Ø³Ù…ÙŠ Ø¨Ù†ÙØ³Ùƒ.",
          "Ù†Ø²Ù‘Ù„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª Ù…Ù† Ø§Ù„Ù…ØªØ§Ø¬Ø± Ø§Ù„Ù…ÙˆØ«ÙˆÙ‚Ø© ÙÙ‚Ø·.",
          "Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ø±Ø³Ø§Ù„Ø© Â«Ù…Ø³ØªØ¹Ø¬Ù„Ø©Â» Ø£Ùˆ Â«Ø³Ø±ÙŠØ©Â»â€¦ ØªÙ…Ù‡Ù‘Ù„."
        ],
        questions:[
          { q:"Ø£ÙŠ Ø±Ø§Ø¨Ø· ÙŠØ¨Ø¯Ùˆ Ø§Ù„Ø£ÙƒØ«Ø± Ø±ÙŠØ¨Ø©ØŸ", a:["school.edu/portal","my-game-free-rewards.xyz","library.gov/books"], ok:1, why:"Ù†Ø·Ø§Ù‚Ø§Øª Ø¹Ø´ÙˆØ§Ø¦ÙŠØ© + Ù…ÙƒØ§ÙØ¢Øª ØºØ§Ù„Ø¨Ø§Ù‹ Ø¹Ù„Ø§Ù…Ø© Ø§Ø­ØªÙŠØ§Ù„." },
          { q:"Ø¸Ù‡Ø±Øª Ù†Ø§ÙØ°Ø© ØªÙ‚ÙˆÙ„ Â«Ø­Ø¯Ù‘Ø« Ø§Ù„Ø¢Ù†!Â». Ù…Ø§ Ø§Ù„Ø£ÙƒØ«Ø± Ø£Ù…Ø§Ù†Ø§Ù‹ØŸ", a:["Ø£ØºÙ„Ù‚Ù‡Ø§ ÙˆØ­Ø¯Ù‘Ø« Ù…Ù† Ø§Ù„Ù…ØªØ¬Ø±/Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø±Ø³Ù…ÙŠØ©","Ø§Ø¶ØºØ· Ø§Ù„Ù†Ø§ÙØ°Ø©","Ø§Ø·Ù„Ø¨ Ù…Ø³Ø§Ø¹Ø¯Ø© Ù…Ù† Ø§Ù„Ù†Ø§ÙØ°Ø©"], ok:0, why:"Ø§Ù„ØªØ­Ø¯ÙŠØ«Ø§Øª ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ù…Ù† Ù…ØµØ¯Ø± Ø±Ø³Ù…ÙŠ." },
          { q:"Ø±Ø³Ø§Ù„Ø© ØªÙ‚ÙˆÙ„: Â«Ù„Ø§ ØªØ®Ø¨Ø± Ø£Ø­Ø¯Ø§Ù‹. Ø§Ø¶ØºØ· Ø§Ù„Ø¢Ù†Â». Ù‡Ø°Ø§:", a:["Ø¥Ø´Ø§Ø±Ø© Ø®Ø·Ø±","ØªØ°ÙƒÙŠØ± Ø·Ø¨ÙŠØ¹ÙŠ","ØªØ¹Ù„ÙŠÙ…Ø§Øª Ù…Ø¹Ù„Ù…"], ok:0, why:"Ø§Ù„Ø³Ø±ÙŠØ© + Ø§Ù„Ø§Ø³ØªØ¹Ø¬Ø§Ù„ Ø£Ø³Ù„ÙˆØ¨ Ø´Ø§Ø¦Ø¹ Ù„Ù„Ø§Ø­ØªÙŠØ§Ù„." }
        ]
      },
      {
        id:3,
        name:"Ø§Ù„Ø®ØµÙˆØµÙŠØ© ÙˆØ§Ù„Ù†Ø´Ø±",
        steps:[
          "Ø§Ø¬Ø¹Ù„ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø®Ø§ØµØ§Ù‹ ÙˆÙ„Ø§ ØªÙ‚Ø¨Ù„ Ø¥Ù„Ø§ Ù…Ù† ØªØ¹Ø±ÙÙ‡Ù… ÙÙŠ Ø§Ù„ÙˆØ§Ù‚Ø¹.",
          "Ù‚Ø¨Ù„ Ù†Ø´Ø± Ø§Ù„ØµÙˆØ±ØŒ ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ø³Ù… Ø§Ù„Ù…Ø¯Ø±Ø³Ø© Ø£Ùˆ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø£Ùˆ Ø§Ù„Ø¬Ø¯ÙˆÙ„.",
          "Ø¥Ø°Ø§ Ø£Ø²Ø¹Ø¬Ùƒ Ø£Ø­Ø¯: Ø§Ø­Ø¸Ø±ØŒ Ø£Ø¨Ù„ØºØŒ Ø§Ù„ØªÙ‚Ø· Ù„Ù‚Ø·Ø© Ø´Ø§Ø´Ø©ØŒ ÙˆØ£Ø®Ø¨Ø± Ø´Ø®ØµØ§Ù‹ Ø¨Ø§Ù„ØºØ§Ù‹."
        ],
        questions:[
          { q:"Ù…Ø§ Ø§Ù„Ø°ÙŠ ÙŠÙ…ÙƒÙ† Ù†Ø´Ø±Ù‡ Ù„Ù„Ø¹Ø§Ù…Ø© ØºØ§Ù„Ø¨Ø§Ù‹ØŸ", a:["Ø¹Ù†ÙˆØ§Ù† Ù…Ù†Ø²Ù„Ùƒ","ØµÙˆØ±Ø© ØªØ¸Ù‡Ø± Ø¬Ø¯ÙˆÙ„Ùƒ","Ø±Ø³Ù… Ø¨Ø¯ÙˆÙ† Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø´Ø®ØµÙŠØ©"], ok:2, why:"Ø§Ù†Ø´Ø± Ù…Ø§ Ù„Ø§ ÙŠÙƒØ´Ù Ø§Ù„Ù‡ÙˆÙŠØ© Ø£Ùˆ Ø§Ù„Ù…ÙˆÙ‚Ø¹." },
          { q:"Ø£ÙØ¶Ù„ Ø¥Ø¹Ø¯Ø§Ø¯ Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ù‡Ùˆ:", a:["Ø§Ù„Ø¬Ù…ÙŠØ¹","ÙÙ‚Ø· Ù…Ù† Ø£Ø¹Ø±ÙÙ‡Ù…","ØºØ±Ø¨Ø§Ø¡ ÙÙ‚Ø·"], ok:1, why:"Ù‚Ù„Ù‘Ù„ ØªÙˆØ§ØµÙ„ Ø§Ù„ØºØ±Ø¨Ø§Ø¡." },
          { q:"Ø´Ø®Øµ ÙŠØªÙ†Ù…Ø± Ø¹Ù„ÙŠÙƒ. Ø£ÙØ¶Ù„ ØªØµØ±ÙØŸ", a:["Ø¬Ø§Ø¯Ù„Ù‡","Ø§Ø­Ø¸Ø±/Ø£Ø¨Ù„Øº ÙˆØ£Ø®Ø¨Ø± Ø´Ø®ØµØ§Ù‹ Ø¨Ø§Ù„ØºØ§Ù‹ ØªØ«Ù‚ Ø¨Ù‡","Ø§Ù†Ø´Ø± Ù…Ø¹Ù„ÙˆÙ…Ø§ØªÙ‡ Ø§Ù„Ø®Ø§ØµØ©"], ok:1, why:"Ù„Ø§ ØªØµØ¹Ù‘Ø¯â€”Ø§Ø³ØªØ®Ø¯Ù… Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ø£Ù…Ø§Ù† ÙˆØ§Ø·Ù„Ø¨ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©." }
        ]
      }
    ]
  };

  const state = {
    lang: "en",
    unlocked: 1,
    active: 1,
    points: 0,
    heroShown: false,
    section: {
      1: { answers:{}, submitted:false, score:0, passed:false, awarded:0 },
      2: { answers:{}, submitted:false, score:0, passed:false, awarded:0 },
      3: { answers:{}, submitted:false, score:0, passed:false, awarded:0 }
    }
  };

  function applyI18n(){
    const t = I18N[state.lang];
    document.documentElement.lang = state.lang;
    document.documentElement.dir = t.dir;

    $("#brandTitle").textContent = t.brandTitle;
    $("#brandSub").textContent = t.brandSub;

    $("#scoreLabel").textContent = t.scoreLabel;
    $("#statusLabel").textContent = t.statusLabel;

    $("#sectionsTitle").textContent = t.sectionsTitle;
    $("#resetBtn").textContent = t.reset;

    $("#leftHelp").textContent = t.leftHelp;

    $("#saveBtn").textContent = t.save;
    $("#loadBtn").textContent = t.load;
    $("#saveNote").textContent = t.saveNote;

    $("#panelSub").textContent = t.panelSub;
    $("#sectionPointsLabel").textContent = t.sectionPointsLabel;
    $("#passRule").textContent = t.passRule;
    $("#submitBtn").textContent = t.submit;
    $("#footerText").textContent = t.footer;

    const c = COURSE[state.lang];
    $("#sec1Name").textContent = c[0].name;
    $("#sec2Name").textContent = c[1].name;
    $("#sec3Name").textContent = c[2].name;

    $("#sec1Hint").textContent = t.secHints.s1;
    $("#sec2Hint").textContent = t.secHints.s2;
    $("#sec3Hint").textContent = t.secHints.s3;

    $("#open1").textContent = t.open;
    $("#open2").textContent = (state.unlocked >= 2) ? t.open : t.locked;
    $("#open3").textContent = (state.unlocked >= 3) ? t.open : t.locked;

    $("#langToggle").textContent = (state.lang === "en") ? "AR" : "EN";

    $("#heroHeader").textContent = t.heroHeader;
    $("#heroTitle").textContent = t.heroTitle;
    $("#heroSub").textContent = t.heroSub;
    $("#heroReplay").textContent = t.heroReplay;
    $("#heroOk").textContent = t.heroOk;
  }

  function renderLeft(){
    $("#points").textContent = state.points;
    $("#unlockCount").textContent = state.unlocked;

    const passedCount = [1,2,3].filter(i => state.section[i]?.passed).length;
    $("#progressBar").style.width = Math.round((passedCount/3)*100) + "%";

    const s2Locked = state.unlocked < 2;
    const s3Locked = state.unlocked < 3;

    $("#secCard2").classList.toggle("locked", s2Locked);
    $("#secCard3").classList.toggle("locked", s3Locked);

    $("#open2").disabled = s2Locked;
    $("#open3").disabled = s3Locked;

    ["secCard1","secCard2","secCard3"].forEach((id, idx)=>{
      const el = $("#"+id);
      el.style.outline = (state.active === idx+1) ? "3px solid rgba(18,179,168,.25)" : "none";
    });
  }

  function renderSection(){
    const sec = COURSE[state.lang][state.active-1];
    const secState = state.section[state.active];

    $("#panelTitle").textContent = (state.lang==="en"
      ? `Section ${sec.id}: ${sec.name}`
      : `Ø§Ù„Ù‚Ø³Ù… ${sec.id}: ${sec.name}`);

    $("#sectionPoints").textContent = secState.score || 0;

    const wrap = $("#content");
    wrap.innerHTML = "";

    const stepsBox = document.createElement("div");
    stepsBox.className = "note";
    stepsBox.innerHTML = `
      <strong>${escape(state.lang==="en" ? "Simple steps" : "Ø®Ø·ÙˆØ§Øª Ø¨Ø³ÙŠØ·Ø©")}</strong>
      <ul>${sec.steps.map(s=>`<li>${escape(s)}</li>`).join("")}</ul>
    `;
    wrap.appendChild(stepsBox);

    const divider = document.createElement("div");
    divider.className = "divider";
    wrap.appendChild(divider);

    sec.questions.forEach((qq, qi)=>{
      const qBox = document.createElement("div");
      qBox.className = "q";
      qBox.innerHTML = `
        <h3>${escape((qi+1) + ") " + qq.q)}</h3>
        <div class="choices">
          ${qq.a.map((opt, ai)=>`
            <button class="choice" data-qi="${qi}" data-ai="${ai}" aria-pressed="${secState.answers[qi]===ai}">
              ${escape(opt)}
            </button>
          `).join("")}
        </div>
        <div class="muted" id="fb_${qi}" style="margin-top:8px"></div>
      `;
      wrap.appendChild(qBox);
    });

    $$(".choice", wrap).forEach(btn=>{
      btn.addEventListener("click", ()=>{
        if(secState.submitted) return;
        const qi = Number(btn.dataset.qi);
        const ai = Number(btn.dataset.ai);
        secState.answers[qi] = ai;
        $$(`.choice[data-qi="${qi}"]`, wrap).forEach(b=>{
          b.setAttribute("aria-pressed", String(Number(b.dataset.ai)===ai));
        });
      });
    });

    if(secState.submitted){
      applySectionResults({silent:true});
    } else {
      $("#resultBox").hidden = true;
    }
  }

  function applySectionResults({silent=false} = {}){
    const t = I18N[state.lang];
    const sec = COURSE[state.lang][state.active-1];
    const secState = state.section[state.active];

    let correct = 0;
    sec.questions.forEach((qq, qi)=>{
      if(secState.answers[qi] === qq.ok) correct++;
    });

    secState.score = correct * 10;
    const passed = correct >= 2;
    secState.passed = passed;

    sec.questions.forEach((qq, qi)=>{
      const chosen = secState.answers[qi];
      const btns = $$(`.choice[data-qi="${qi}"]`);
      btns.forEach(b=>{
        b.disabled = true;
        const ai = Number(b.dataset.ai);
        if(ai === qq.ok) b.classList.add("correct");
        if(ai === chosen && ai !== qq.ok) b.classList.add("wrong");
      });
      const fb = $(`#fb_${qi}`);
      if(fb) fb.textContent = (chosen === qq.ok) ? "âœ…" : "âŒ " + qq.why;
    });

    const prevAwarded = secState.awarded ?? 0;
    const delta = secState.score - prevAwarded;
    if(delta > 0){
      state.points += delta;
      secState.awarded = secState.score;
    }

    if(passed && state.unlocked < 3 && state.active === state.unlocked){
      state.unlocked = Math.min(3, state.unlocked + 1);
    }

    $("#resultBox").hidden = false;
    $("#resultBox").className = "callout " + (passed ? "ok" : "warn");
    $("#resultBox").innerHTML = `
      <strong>${escape(passed ? t.resultPass : t.resultFail)}</strong>
      <div class="muted" style="margin-top:6px">${escape((state.lang==="en" ? "Score" : "Ø§Ù„Ù†ØªÙŠØ¬Ø©") + ": " + correct + "/3 â€¢ " + secState.score + " pts")}</div>
    `;

    renderLeft();
    $("#points").textContent = state.points;
    $("#sectionPoints").textContent = secState.score;

    if(!silent) saveSilent();
    maybeShowHero();
  }

  function saveSilent(){ localStorage.setItem(KEY, JSON.stringify(state)); }
  function save(){ saveSilent(); flash(I18N[state.lang].flashes.saved); }

  function allSectionsPassed(){ return [1,2,3].every(i => state.section[i]?.passed); }

  function maybeShowHero(){
    if(allSectionsPassed() && !state.heroShown){
      state.heroShown = true;
      saveSilent();
      showHeroModal();
    }
  }

  function showHeroModal(){
    $("#heroOverlay").classList.add("show");
    startConfetti(2400);
  }
  function hideHeroModal(){
    $("#heroOverlay").classList.remove("show");
    stopConfetti();
  }

  let confettiTimer = null;
  let raf = null;
  let particles = [];
  function startConfetti(durationMs=2000){
    const canvas = $("#confetti");
    const ctx = canvas.getContext("2d");
    canvas.classList.add("show");

    function resize(){
      canvas.width = window.innerWidth * devicePixelRatio;
      canvas.height = window.innerHeight * devicePixelRatio;
      ctx.setTransform(devicePixelRatio,0,0,devicePixelRatio,0,0);
    }
    resize();
    window.addEventListener("resize", resize);

    particles = Array.from({length: 140}, () => makeParticle());

    const start = performance.now();
    function tick(now){
      const w = window.innerWidth;
      const h = window.innerHeight;
      ctx.clearRect(0,0,w,h);

      particles.forEach(p=>{
        p.x += p.vx;
        p.y += p.vy;
        p.vy += 0.03;
        p.rot += p.vr;

        if(p.y > h + 20) { Object.assign(p, makeParticle(true)); p.y = -10; }

        ctx.save();
        ctx.translate(p.x, p.y);
        ctx.rotate(p.rot);
        ctx.fillStyle = p.color;
        ctx.fillRect(-p.size/2, -p.size/2, p.size, p.size*0.6);
        ctx.restore();
      });

      if(now - start < durationMs){
        raf = requestAnimationFrame(tick);
      }else{
        stopConfetti();
        window.removeEventListener("resize", resize);
      }
    }
    raf = requestAnimationFrame(tick);

    clearTimeout(confettiTimer);
    confettiTimer = setTimeout(()=>stopConfetti(), durationMs+250);
  }

  function makeParticle(reuse=false){
    const w = window.innerWidth, h = window.innerHeight;
    const colors = ["#5a67ff","#12b3a8","#f59e0b","#ef4444","#16a34a","#7c3aed"];
    return {
      x: Math.random()*w,
      y: reuse ? -20 : Math.random()*h*0.3,
      vx: (Math.random()*2-1) * 1.6,
      vy: Math.random()*2 + 1.2,
      rot: Math.random()*Math.PI,
      vr: (Math.random()*2-1)*0.08,
      size: Math.random()*10 + 8,
      color: colors[Math.floor(Math.random()*colors.length)]
    };
  }

  function stopConfetti(){
    const canvas = $("#confetti");
    if(!canvas) return;
    canvas.classList.remove("show");
    const ctx = canvas.getContext("2d");
    ctx && ctx.clearRect(0,0,canvas.width,canvas.height);
    if(raf) cancelAnimationFrame(raf);
    raf = null;
    clearTimeout(confettiTimer);
    confettiTimer = null;
  }

  $("#heroClose").addEventListener("click", hideHeroModal);
  $("#heroOk").addEventListener("click", hideHeroModal);
  $("#heroReplay").addEventListener("click", ()=>startConfetti(2200));
  $("#heroOverlay").addEventListener("click", (e)=>{
    if(e.target.id === "heroOverlay") hideHeroModal();
  });

  function openSection(n){
    if(n > state.unlocked) return;
    state.active = n;
    renderAll();
  }

  $("#open1").addEventListener("click", ()=>openSection(1));
  $("#open2").addEventListener("click", ()=>openSection(2));
  $("#open3").addEventListener("click", ()=>openSection(3));

  $("#submitBtn").addEventListener("click", ()=>{
    const sec = COURSE[state.lang][state.active-1];
    const secState = state.section[state.active];

    for(let i=0;i<sec.questions.length;i++){
      if(secState.answers[i] === undefined){
        flash(state.lang==="en" ? "Answer all 3 questions first." : "Ø£Ø¬Ø¨ Ø¹Ù† Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø«Ù„Ø§Ø«Ø© Ø£ÙˆÙ„Ø§Ù‹.");
        return;
      }
    }

    secState.submitted = true;
    applySectionResults({silent:false});
    renderSection();
  });

  $("#resetBtn").addEventListener("click", ()=>{ localStorage.removeItem(KEY); location.reload(); });
  $("#saveBtn").addEventListener("click", save);
  $("#loadBtn").addEventListener("click", load);

  $("#langToggle").addEventListener("click", ()=>{
    setLang(state.lang === "en" ? "ar" : "en");
  });

  function setLang(next){ state.lang = next; renderAll(); }

  function renderAll(){
    applyI18n();
    renderLeft();
    renderSection();
    maybeShowHero();
  }

  (function init(){
    const raw = localStorage.getItem(KEY);
    if(raw){
      try{
        const data = JSON.parse(raw);
        Object.assign(state, data);
        if(!I18N[state.lang]) state.lang = "en";

        state.unlocked = Math.max(1, Math.min(3, state.unlocked || 1));
        state.active = Math.max(1, Math.min(state.unlocked, state.active || 1));

        state.section = state.section || {};
        for(const i of [1,2,3]){
          if(!state.section[i]) state.section[i] = { answers:{}, submitted:false, score:0, passed:false, awarded:0 };
          if(state.section[i].awarded === undefined) state.section[i].awarded = 0;
        }
        if(state.heroShown === undefined) state.heroShown = false;
      }catch{}
    }
    renderAll();
  })();
</script>
</body>
</html>
